--- tigervnc-1.2.0/common/rdr/TLSInStream.cxx.orig	2010-09-30 08:25:28.000000000 +0200
+++ tigervnc-1.2.0/common/rdr/TLSInStream.cxx	2012-03-23 13:33:16.068563580 +0100
@@ -27,9 +27,7 @@
 #include <rdr/TLSInStream.h>
 #include <errno.h>
 
-#ifdef HAVE_OLD_GNUTLS
 #define gnutls_transport_set_global_errno(A) do { errno = (A); } while(0)
-#endif
 
 #ifdef HAVE_GNUTLS 
 using namespace rdr;
--- tigervnc-1.2.0/common/rdr/TLSOutStream.cxx~	2010-09-30 08:25:28.000000000 +0200
+++ tigervnc-1.2.0/common/rdr/TLSOutStream.cxx	2012-03-23 13:42:11.861921087 +0100
@@ -27,9 +27,7 @@
 #include <rdr/TLSOutStream.h>
 #include <errno.h>
 
-#ifdef HAVE_OLD_GNUTLS
 #define gnutls_transport_set_global_errno(A) do { errno = (A); } while(0)
-#endif
 
 #ifdef HAVE_GNUTLS
 using namespace rdr;
